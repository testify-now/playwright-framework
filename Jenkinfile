pipeline {
agent any
stages {
stage('Install Dependencies') {
steps {
sh 'npm install'
}
}
stage('Run Tests') {
steps {
sh 'npx cucumber-js -p default'
}
}
stage('Generate Allure Report') {
steps {
sh 'allure generate allure-results --clean'
}
}
stage('Publish Allure Report') {
steps {
allure([
includeProperties: false,
jdk: '',
results: [[path: 'allure-results']]
])
}
}
}
post {
always {
junit 'reports/.xml'
archiveArtifacts artifacts: 'allure-results/**/', allowEmptyArchive: true
}
}
}